---
layout: city
---

<div class="row">
  <div class="cities-list col-xs-12 col-md-12">
    <h1>{{ page.land }}</h1>
    <div class="bundesland-box">
      <div class="name">
        <h2> {{ page.land }}</h2>
        Länderhaushalt {{ page.years }}
      </div>
      {% assign land = site.haushalte | where: "state", page.code | where: "level", "land"  %}
      {% assign land_size = land | size %}
      {% if land_size > 0 %}
        {% for l in land %}
          {% if l.config %}
          <div class="visualisierung">
            <a href="{{ l.url }}">  zur Visualisierung {% icon fa-long-arrow-right %}</a>
          </div>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
    {% assign cities = site.haushalte | where: "state", page.code %}
    {% assign cities = cities | where: "level", "kommune" %}
    {% assign cities_size = cities | size %}
    {% if cities_size > 0 %}
    <hr>
    {% endif %}
    {% for c in cities %}
    {% if c.config %}
    <div class="bundesland-box">
      <div class="name">
        <h2>{{ c.name }}</h2>
        Länderhaushalt - 2016
      </div>
      <div class="visualisierung">
        <a href="{{ c.url }}"> zur Visualisierung {% icon fa-long-arrow-right %}</a>
      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
</div>
{% if page.code != 'BE' %}
<div class="row cities-count">
  <div class="container">
    <div class="row">
      <div class="cities-message col-xs-12 col-md-12">
        {% assign count = site.budget | where: "state", page.code | size %}
        {% assign kommunen_nummer = site.data.kommunen[page.code] | size %}
        <h1>{{ page.land }} hat {{ kommunen_nummer }} Kommunen. {% if cities_size > 0 %}{% if cities_size == 1 %}Wir haben erst einen Haushalt. {% else %}Wir haben aber erst {{ cities_size }} Haushalte.{% endif %}{% else %}Wir haben noch keine Haushalte.{% endif %}</h1>
        <p>Helfen Sie mit einen weiteren Haushalt zu veröffentlichen und fragen ihn bei der Behörde an!</p>
      </div>
   </div>
   <div class="row">
      <div class="letters-list">
        A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
      </div>
   </div>
  </div>
</div>
<div class="row cities-list">
  <ul>
  {% assign letters = [] %}
  {% assign cities_count = 0 %}
  {% assign old_letter = '' %}
  {% for k in site.data.kommunen[page.code] %}
    {% assign cities_count = cities_count + 1 %}
    {% assign city = k %}
    {% assign letter = city | slice: 0 %}
    {% if letter != old_letter %}
      {% if forloop.index0 != 0 %}
        {% assign cols_size = cs | size %}
        {% if cols_size >= 15 %}
        {% assign cols_size = cols_size | divided_by: 3 %}
        {% else %}
        {% assign cols_size = cols_size %}
        {% endif %}
        <div class="container letters">
          <div class="letter-background">
            {{ old_letter }}
          </div>
        {% for c in cs %}
          {% if forloop.index > cols_size %}
            {% assign cols_size = cols_size | plus: cols_size %}
            </div>
            <div class="letter-col col-xs-3 col-md-3">
          {% endif %}
          {% if forloop.index == 1 %}
            <div class="letter-col first col-xs-3 col-md-3">
          {% endif%}
            {{ c }}
            <p>
        {% endfor %}
          </div>
        </div>
      {% endif %}
       {% assign cs = '' | split:'' | push: city %}
      {% assign cities_count = 1 %}
    {% else %}
      {% assign cs = cs | push: city %}
    {% endif %}
    {% assign old_letter = letter %}
  {% endfor %}
  </ul>
</div>
{% endif %}
